import{CSSMatrix,extend,isNumber,setElementTransform}from"vs_utils";const HTMLElement=window&&window.HTMLElement;function translate(s,t){this._vs_node_tx===s&&this._vs_node_ty===t||(this._vs_node_tx=s,this._vs_node_ty=t,applyTransformation(this))}function rotate(s){this._vs_node_r!==s&&(this._vs_node_r=s,applyTransformation(this))}function scale(s){this._vs_node_s!==s&&(this._vs_node_s=s,applyTransformation(this))}function setNewTransformOrigin(s){if(s&&isNumber(s.x)&&isNumber(s.y)){this._vs_node_origin||(this._vs_node_origin=[0,0]);var t=new CSSMatrix;t=(t=(t=(t=(t=t.translate(this._vs_node_origin[0],this._vs_node_origin[1],0)).translate(this._vs_node_tx,this._vs_node_ty,0)).rotate(0,0,this._vs_node_r)).scale(this._vs_node_s,this._vs_node_s,1)).translate(-this._vs_node_origin[0],-this._vs_node_origin[1],0),this._vs_transform||(this._vs_transform=t),this._vs_transform=t.multiply(this._vs_transform),this._vs_node_tx=0,this._vs_node_ty=0,this._vs_node_s=1,this._vs_node_r=0,this._vs_node_origin=[s.x,s.y]}}function clearTransformStack(){this._vs_transform&&delete this._vs_transform,this._vs_transform=void 0}function getCTM(){var s=new CSSMatrix;return this._vs_node_origin||(this._vs_node_origin=[0,0]),s=(s=(s=(s=(s=s.translate(this._vs_node_origin[0],this._vs_node_origin[1],0)).translate(this._vs_node_tx,this._vs_node_ty,0)).rotate(0,0,this._vs_node_r)).scale(this._vs_node_s,this._vs_node_s,1)).translate(-this._vs_node_origin[0],-this._vs_node_origin[1],0),this._vs_transform?s.multiply(this._vs_transform):s}function getParentCTM(){function s(t){return t?s(t.parentNode).multiply(t.vsGetCTM()):new CSSMatrix}return s(this.parentNode)}function applyTransformation(s){var t=s.vsGetCTM();setElementTransform(s,t.toString())}extend(HTMLElement.prototype,{_vs_node_tx:0,_vs_node_ty:0,_vs_node_s:1,_vs_node_r:0,vsTranslate:translate,vsRotate:rotate,vsScale:scale,vsSetNewTransformOrigin:setNewTransformOrigin,vsClearTransformStack:clearTransformStack,vsGetCTM:getCTM,vsGetParentCTM:getParentCTM});